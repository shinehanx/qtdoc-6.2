<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- androiddeployqt.qdoc -->
  <title>The androiddeployqt Tool | Qt Core 6.2.3</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html">Qt 6.2</a></li>
<li><a href="qtcore-index.html">Qt Core</a></li>
<li>The androiddeployqt Tool</li>
<li id="buildversion"><a href="qtcore-index.html">Qt 6.2&#x2e;3 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#prerequisites-before-running-androiddeployqt">Prerequisites Before Running androiddeployqt</a></li>
<li class="level1"><a href="#command-line-arguments">Command Line Arguments</a></li>
<li class="level1"><a href="#dependencies-detection">Dependencies Detection</a></li>
<li class="level1"><a href="#android-specific-qmake-variables">Android-specific qmake Variables</a></li>
<li class="level1"><a href="#deployment-in-qt-creator">Deployment in Qt Creator</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">The androiddeployqt Tool</h1>
<!-- $$$android-deploy-qt-tool.html-description -->
<div class="descr" id="details">
<span id="androiddeployqt"></span><p>Building an application package is complex, so Qt comes with a tool which handles the work for you. The steps described in <a href="../qtdoc/deployment-android.html">Deploying an Application on Android</a> are handled by the androiddeployqt tool.</p>
<h2 id="prerequisites-before-running-androiddeployqt">Prerequisites Before Running androiddeployqt</h2>
<p>Before running the tool manually, you need to run <code>qmake</code> or <code>CMake</code> on your project to generate <code>Makefiles</code> and a <code>JSON</code> file (i.e&#x2e; <code>android-project-deployment-settings.json</code>) containing important settings used by <code>androiddeployqt</code>.</p>
<div class="admonition note">
<p><b>Note: </b>It is not recommended to modify the androiddeployqt JSON file.</p>
</div>
<p>To prepare the build for androiddeployqt, it is recommended to build your project in a separate directory. Run the following commands:</p>
<pre class="cpp plain">
 mkdir build-project
 cd build-project
</pre>
<p>Followed by:</p>
<p>For qmake:</p>
<pre class="cpp plain">
 qmake ../project/project.pro
 make -j$(nproc)
 make -j$(nproc) apk_install_target
</pre>
<p>For CMake:</p>
<pre class="cpp plain">
 cmake --build
</pre>
<h2 id="command-line-arguments">Command Line Arguments</h2>
<p>The only required command line argument when running the tool is <code>--output</code>. Other command line arguments are optional but useful. Here's a quick overview. More information is available by passing the <code>--help</code> argument to androiddeployqt.</p>
<div class="table"><table class="generic">
 <thead><tr class="qt-style"><th >Argument</th><th >Brief Description</th></tr></thead>
<tr valign="top" class="odd"><td ><code>--output &lt;destination&gt;</code></td><td >Specifies the destination of the final package. Set this to <code>$ANDROID_BUILD_DIR</code>, that is the build directory where you installed your application binaries.</td></tr>
<tr valign="top" class="even"><td ><code>--input &lt;file name&gt;</code></td><td >This allows you to specify the generated <code>JSON</code> settings file. <code>androiddeployqt</code> will try to guess the file name based on the current working directory.</td></tr>
<tr valign="top" class="odd"><td ><code>--aab</code></td><td >Generate an Android Application Bundle, rather than an APK. Note that this invalidates some of the other arguments, such as <code>--install</code>.</td></tr>
<tr valign="top" class="even"><td ><code>--deployment &lt;mechanism&gt;</code></td><td >Specify this to pick a different deployment mechanism than the default.</td></tr>
<tr valign="top" class="odd"><td ><code>--install</code></td><td >Specify this to install the finished package on the target device or emulator. Note that if a previous version of the package is already installed, it will be uninstalled first, removing any data it might have stored locally.</td></tr>
<tr valign="top" class="even"><td ><code>--device &lt;ID&gt;</code></td><td >Specify the ID of the target device or emulator as reported by the <code>adb</code> tool. If an ID is specified, it will be passed to all calls to <code>adb</code>. If it is unspecified, no particular device or emulator will be requested by <code>adb</code>, causing it to pick a default instead.</td></tr>
<tr valign="top" class="odd"><td ><code>--android-platform &lt;platform&gt;</code></td><td >The SDK platform used for building the Java code of the application. By default, the latest available platform is used.</td></tr>
<tr valign="top" class="even"><td ><code>--release</code></td><td >Specify this to create a release package instead of a debug package. With no other arguments, release packages are unsigned and cannot be installed to any device before they have been signed by a private key.</td></tr>
<tr valign="top" class="odd"><td ><code>--sign &lt;url&gt; &lt;alias&gt;</code></td><td >Sign the resulting package. Specifying this also implies <code>--release</code>. The URL of the keystore file and the alias of the key have to be specified. Optionally, set the following environment variables to conceal the signing information <code>QT_ANDROID_KEYSTORE_PATH</code>, <code>QT_ANDROID_KEYSTORE_ALIAS</code>, <code>QT_ANDROID_KEYSTORE_STORE_PASS</code>, and <code>QT_ANDROID_KEYSTORE_KEY_PASS</code>. In addition, there are a number of options that can be specified which are passed through to the <code>jarsigner</code> tool. Pass <code>--help</code> to <code>androiddeployqt</code> for more information.</td></tr>
<tr valign="top" class="even"><td ><code>--jdk &lt;path&gt;</code></td><td >Specify the path to the Java Development Kit. This is only required for signing packages, as it is only used for finding the <code>jarsigner</code> tool. If it is unspecified, then <code>androiddeployqt</code> will attempt to detect <code>jarsigner</code>, either using the <code>JAVA_HOME</code> environment variable, or on the <code>PATH</code>.</td></tr>
<tr valign="top" class="odd"><td ><code>--verbose</code></td><td >Specify this to output more information about what <code>androiddeployqt</code> is doing.</td></tr>
<tr valign="top" class="even"><td ><code>--help</code></td><td >Prints the help for the tool.</td></tr>
</table></div>
<p>With a project named <code>project</code>, to directly build the application package with <code>androiddeployqt</code> without deploying it the device, run the following:</p>
<pre class="cpp plain">
 .androiddeployqt --input $BUILD_DIR/android-project-deployment-settings.json --output $ANDROID_BUILD_DIR
</pre>
<p>To deploy the built package to the device:</p>
<pre class="cpp plain">
 androiddeployqt --verbose --output $ANDROID_BUILD_DIR --no-build --input $BUILD_DIR/android-project-deployment-settings.json --gradle --reinstall --device &lt;adb_device_id&gt;
</pre>
<h2 id="dependencies-detection">Dependencies Detection</h2>
<p>Qt comes with a number of plugins which are loaded at run-time when they are needed. These can handle anything from connecting to SQL databases to loading specific image formats. Detecting plugin dependencies is impossible as the plugins are loaded at run-time, but androiddeployqt tries to guess such dependencies based on the Qt dependencies of your application. If the plugin has any Qt dependencies which are not also dependencies of your application, it will not be included by default. For instance, in order to ensure that the SVG image format plugin is included, you will need to add <a href="../qtsvg/qtsvg-index.html">Qt SVG</a> module to your project for it to become a dependency of your application:</p>
<pre class="cpp plain">
 QT += svg
</pre>
<p>If you are wondering why a particular plugin is not included automatically, you can run androiddeployqt with the <code>--verbose</code> option to get the list of missing dependencies for each excluded plugin. You can achieve the same in Qt Creator by ticking the <b>Verbose output</b> check box in the <b>Projects</b> &gt; <b>Build Steps</b> &gt; <b>Build Android APK</b> &gt; <b>Advanced Actions</b>.</p>
<p>It's also possible to manually specify the dependencies of your application. For more information, see <a href="../qmake/qmake-variable-reference.html#android-deployment-dependencies">ANDROID_DEPLOYMENT_DEPENDENCIES</a> qmake variable.</p>
<h2 id="android-specific-qmake-variables">Android-specific qmake Variables</h2>
<p>Unless the project has special requirements such as third party libraries, it should be possible to run <a href="android-deploy-qt-tool.html#androiddeployqt">androiddeployqt</a> on it with no modifications and get a working Qt for Android application.</p>
<p>There are two important environment variables used by Qt:</p>
<ul>
<li><code>ANDROID_SDK_ROOT</code>: specifies the path to the Android SDK used for building the application. The Android SDK contains the build-tools, Android NDK, and Android toolchains.</li>
<li><code>ANDROID_NDK_ROOT</code>: specifies the path to the Android NDK used to build the application. It is not recommended to hard-code this path, since different Qt for Android versions can depend on different Android NDK versions.</li>
</ul>
<div class="admonition note">
<p><b>Note: </b>Qt Creator sets these variables by default.</p>
</div>
<p>There are a set of <code>qmake</code> or <code>CMake</code> variables that can be used to tailor your package. At some point during development, you will most likely want to look into these variables to customize your application.</p>
<p>Here is a list of some variables that are particularly interesting when making Android applications:</p>
<ul>
<li><a href="../qmake/qmake-variable-reference.html#android-package-source-dir">ANDROID_PACKAGE_SOURCE_DIR</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-version-code">ANDROID_VERSION_CODE</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-version-name">ANDROID_VERSION_NAME</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-extra-libs">ANDROID_EXTRA_LIBS</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-extra-plugins">ANDROID_EXTRA_PLUGINS</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-abis">ANDROID_ABIS</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-api-version">ANDROID_API_VERSION</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-deployment-dependencies">ANDROID_DEPLOYMENT_DEPENDENCIES</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-min-sdk-version">ANDROID_MIN_SDK_VERSION</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-target-sdk-version">ANDROID_TARGET_SDK_VERSION</a></li>
<li><a href="../qmake/qmake-variable-reference.html#java-home">JAVA_HOME</a></li>
</ul>
<p>Also, the following <code>qmake</code> variables are primarily useful when writing a Qt module, and not normal applications:</p>
<ul>
<li><a href="../qmake/qmake-variable-reference.html#android-bundled-jar-dependencies">ANDROID_BUNDLED_JAR_DEPENDENCIES</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-lib-dependencies">ANDROID_LIB_DEPENDENCIES</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-permissions">ANDROID_PERMISSIONS</a></li>
<li><a href="../qmake/qmake-variable-reference.html#android-features">ANDROID_FEATURES</a></li>
</ul>
<div class="admonition note">
<p><b>Note: </b>This list of variables can also be used with CMake.</p>
</div>
<h2 id="deployment-in-qt-creator">Deployment in Qt Creator</h2>
<p>Qt Creator runs <code>androiddeployqt</code> by default, and provides easy and intuitive user interfaces to specify many of the options. For more information, see <a href="https://doc.qt.io/qtcreator/creator-deploying-android.html">Qt Creator: Deploying Applications to Android Devices</a>.</p>
</div>
<!-- @@@android-deploy-qt-tool.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2022 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
