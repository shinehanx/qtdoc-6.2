<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qandroidnativeinterface.cpp -->
  <title>QAndroidApplication Struct | Qt Core 6.2.3</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html">Qt 6.2</a></li>
<li><a href="qtcore-index.html">Qt Core</a></li>
<li><a href="qtcore-module.html">C++ Classes</a></li>
<li>QAndroidApplication</li>
<li id="buildversion"><a href="qtcore-index.html">Qt 6.2&#x2e;3 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#static-public-members">Static Public Members</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">QAndroidApplication Struct</h1>
<span class="small-subtitle">struct <a href="qnativeinterface-sub-qtcore.html">QNativeInterface</a>::QAndroidApplication</span>
<!-- $$$QAndroidApplication-brief -->
<p>Native interface to a core application on Android. <a href="#details">More...</a></p>
<!-- @@@QAndroidApplication -->
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">  <span class="preprocessor">#include &lt;<a href="qcoreapplication.html">QCoreApplication</a>&gt;</span>
</td></tr><tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> find_package(Qt6 COMPONENTS Core REQUIRED) <br/>
target_link_libraries(mytarget PRIVATE Qt6::Core)</td></tr><tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += core</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 6.2</td></tr></table></div>
<ul>
<li><a href="qnativeinterface-qandroidapplication-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="static-public-members">Static Public Members</h2>
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="qnativeinterface-qandroidapplication.html#context">context</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qnativeinterface-qandroidapplication.html#hideSplashScreen">hideSplashScreen</a></b>(int <i>duration</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qnativeinterface-qandroidapplication.html#isActivityContext">isActivityContext</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QFuture&lt;QVariant&gt; </td><td class="memItemRight bottomAlign"><b><a href="qnativeinterface-qandroidapplication.html#runOnAndroidMainThread">runOnAndroidMainThread</a></b>(const std::function&lt;QVariant ()&gt; &amp;<i>runnable</i>, const QDeadlineTimer <i>timeout</i> = QDeadlineTimer::Forever)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="qnativeinterface-qandroidapplication.html#sdkVersion">sdkVersion</a></b>()</td></tr>
</table></div>
<!-- $$$QAndroidApplication-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>Accessed through QCoreApplication::nativeInterface().</p>
</div>
<!-- @@@QAndroidApplication -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$context[overload1]$$$context -->
<h3 class="fn" id="context"><code>[static, since 6.2] </code><span class="type">int</span> QAndroidApplication::<span class="name">context</span>()</h3>
<p>Returns the Android context as a <code>jobject</code>. The context is an <code>Activity</code> if the main activity object is valid. Otherwise, the context is a <code>Service</code>.</p>
<p>This function was introduced in Qt 6.2.</p>
<!-- @@@context -->
<!-- $$$hideSplashScreen[overload1]$$$hideSplashScreenint -->
<h3 class="fn" id="hideSplashScreen"><code>[static, since 6.2] </code><span class="type">void</span> QAndroidApplication::<span class="name">hideSplashScreen</span>(<span class="type">int</span> <i>duration</i> = 0)</h3>
<p>Hides the splash screen by using a fade effect for the given <i>duration</i>. If <i>duration</i> is not provided (default is 0) the splash screen is hidden immedetiately after the app starts.</p>
<p>This function was introduced in Qt 6.2.</p>
<!-- @@@hideSplashScreen -->
<!-- $$$isActivityContext[overload1]$$$isActivityContext -->
<h3 class="fn" id="isActivityContext"><code>[static, since 6.2] </code><span class="type">bool</span> QAndroidApplication::<span class="name">isActivityContext</span>()</h3>
<p>Returns <code>true</code> if <a href="qnativeinterface-qandroidapplication.html#context">QAndroidApplication::context</a>() provides an <code>Activity</code> context.</p>
<p>This function was introduced in Qt 6.2.</p>
<!-- @@@isActivityContext -->
<!-- $$$runOnAndroidMainThread[overload1]$$$runOnAndroidMainThreadconststd::function<QVariant()>&constQDeadlineTimer -->
<h3 class="fn" id="runOnAndroidMainThread"><code>[static, since 6.2] </code><span class="type"><a href="qfuture.html">QFuture</a></span>&lt;<span class="type"><a href="qvariant.html">QVariant</a></span>&gt; QAndroidApplication::<span class="name">runOnAndroidMainThread</span>(const <span class="type">std::function</span>&lt;<span class="type"><a href="qvariant.html">QVariant</a></span> ()&gt; &amp;<i>runnable</i>, const <span class="type"><a href="qdeadlinetimer.html">QDeadlineTimer</a></span> <i>timeout</i> = QDeadlineTimer::Forever)</h3>
<p>Posts the function <i>runnable</i> to the Android thread. The function will be queued and executed on the Android UI thread. If the call is made on the Android UI thread <i>runnable</i> will be executed immediately. If the Android app is paused or the main Activity is null, <code>runnable</code> is added to the Android main thread's queue.</p>
<p>This call returns a <a href="qfuture.html">QFuture</a>&lt;<a href="qvariant.html">QVariant</a>&gt; which allows doing both synchronous and asynchronous calls, and can handle any return type. However, to get a result back from the <a href="qfuture.html#result">QFuture::result</a>(), <a href="qvariant.html#value">QVariant::value</a>() should be used.</p>
<p>If the <i>runnable</i> execution takes longer than the period of <i>timeout</i>, the blocking calls <a href="qfuture.html#waitForFinished">QFuture::waitForFinished</a>() and <a href="qfuture.html#result">QFuture::result</a>() are ended once <i>timeout</i> has elapsed. However, if <i>runnable</i> has already started execution, it won't be cancelled.</p>
<p>The following example shows how to run an asynchronous call that expects a return type:</p>
<pre class="cpp">
 <span class="keyword">auto</span> task <span class="operator">=</span> <span class="type">QNativeInterface</span><span class="operator">::</span><span class="type">QAndroidApplication</span><span class="operator">::</span>runOnAndroidMainThread(<span class="operator">[</span><span class="operator">=</span><span class="operator">]</span>() {
     <span class="type"><a href="qjniobject.html">QJniObject</a></span> surfaceView;
     <span class="keyword">if</span> (<span class="operator">!</span>surfaceView<span class="operator">.</span>isValid())
         <a href="qtglobal.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;SurfaceView object is not valid yet&quot;</span>;

     surfaceView <span class="operator">=</span> <span class="type"><a href="qjniobject.html">QJniObject</a></span>(<span class="string">&quot;android/view/SurfaceView&quot;</span><span class="operator">,</span>
                              <span class="string">&quot;(Landroid/content/Context;)V&quot;</span><span class="operator">,</span>
                              <span class="type">QNativeInterface</span><span class="operator">::</span><span class="type">QAndroidApplication</span><span class="operator">::</span>context());

     <span class="keyword">return</span> <span class="type"><a href="qvariant.html">QVariant</a></span><span class="operator">::</span>fromValue(surfaceView);
 })<span class="operator">.</span>then(<span class="operator">[</span><span class="operator">]</span>(<span class="type"><a href="qfuture.html">QFuture</a></span><span class="operator">&lt;</span><span class="type"><a href="qvariant.html">QVariant</a></span><span class="operator">&gt;</span> future) {
     <span class="keyword">auto</span> surfaceView <span class="operator">=</span> future<span class="operator">.</span>result()<span class="operator">.</span>value<span class="operator">&lt;</span><span class="type"><a href="qjniobject.html">QJniObject</a></span><span class="operator">&gt;</span>();
     <span class="keyword">if</span> (surfaceView<span class="operator">.</span>isValid())
         <a href="qtglobal.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Retrieved SurfaceView object is valid&quot;</span>;
 });
</pre>
<p>The following example shows how to run a synchronous call with a void return type:</p>
<pre class="cpp">
 <span class="type">QNativeInterface</span><span class="operator">::</span><span class="type">QAndroidApplication</span><span class="operator">::</span>runOnAndroidMainThread(<span class="operator">[</span><span class="operator">]</span>() {
    <span class="type"><a href="qjniobject.html">QJniObject</a></span> activity <span class="operator">=</span> <span class="type">QNativeInterface</span><span class="operator">::</span><span class="type">QAndroidApplication</span><span class="operator">::</span>context();
    <span class="comment">// Hide system ui elements or go full screen</span>
    activity<span class="operator">.</span>callObjectMethod(<span class="string">&quot;getWindow&quot;</span><span class="operator">,</span> <span class="string">&quot;()Landroid/view/Window;&quot;</span>)
            <span class="operator">.</span>callObjectMethod(<span class="string">&quot;getDecorView&quot;</span><span class="operator">,</span> <span class="string">&quot;()Landroid/view/View;&quot;</span>)
            <span class="operator">.</span>callMethod<span class="operator">&lt;</span><span class="type">void</span><span class="operator">&gt;</span>(<span class="string">&quot;setSystemUiVisibility&quot;</span><span class="operator">,</span> <span class="string">&quot;(I)V&quot;</span><span class="operator">,</span> <span class="number">0xffffffff</span>);
 })<span class="operator">.</span>waitForFinished();
</pre>
<div class="admonition note">
<p><b>Note: </b>Becareful about the type of operations you do on the Android's main thread, as any long operation can block the app's UI rendering and input handling. If the function is expected to have long execution time, it's also good to use a <a href="qdeadlinetimer.html">QDeadlineTimer</a> in your <i>runnable</i> to manage the execution and make sure it doesn't block the UI thread. Usually, any operation longer than 5 seconds might block the app's UI. For more information, see <a href="https://developer.android.com/training/articles/perf-anr">Keeping your app responsive</a>.</p>
</div>
<p>This function was introduced in Qt 6.2.</p>
<!-- @@@runOnAndroidMainThread -->
<!-- $$$sdkVersion[overload1]$$$sdkVersion -->
<h3 class="fn" id="sdkVersion"><code>[static, since 6.2] </code><span class="type">int</span> QAndroidApplication::<span class="name">sdkVersion</span>()</h3>
<p>Returns the Android SDK version. This is also known as the API level.</p>
<p>This function was introduced in Qt 6.2.</p>
<!-- @@@sdkVersion -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2022 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
