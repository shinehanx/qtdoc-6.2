<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- android-publishing-to-googleplay.qdoc -->
  <title>Publishing to Google Play | Qt 6.2</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="index.html">Qt 6.2</a></li>
<li>Publishing to Google Play</li>
<li id="buildversion">Qt 6.2.3 Reference Documentation</li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
  <link rel="prev" href="android-3rdparty-libs.html" />
  <link rel="next" href="android-platform-notes.html" />
<p class="naviNextPrevious headerNavi">
<a class="prevPage" href="android-3rdparty-libs.html">Third-party Android Libraries</a>
<span class="naviSeparator">  &#9702;  </span>
<a class="nextPage" href="android-platform-notes.html">Android Platform Notes</a>
</p>
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#building-the-app">Building the App</a></li>
<li class="level1"><a href="#uploading-the-app-to-google-play-store">Uploading the App to Google Play Store</a></li>
<li class="level2"><a href="#publishing-single-abi-bundles">Publishing Single-ABI bundles</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Publishing to Google Play</h1>
<!-- $$$android-publishing-to-googleplay.html-description -->
<div class="descr" id="details">
<p><a href="android.html">Qt for Android</a> provides a complete solution to develop, build, and package your applications for Android. Most of these tasks, especially packaging and deployment are handled by Qt Creator providing rich developer experience.</p>
<p>Every time you run the application using Qt Creator, an Android Application Package (APK) is created and deployed onto the target of your choice (device or emulator). With few minor changes to packaging settings, you can publish your application on Google Play.</p>
<h2 id="building-the-app">Building the App</h2>
<p>The following instructions guide you to create an <code>.apk</code> or <code>.aab</code> that can go live on Google Play</p>
<ol class="1" type="1"><li>Open your project with Qt Creator 4.11 or later choosing a <code>Release Build</code>.</li>
<li>Select <b>Projects</b> &gt; <b>Build</b> &gt; <b>Build Android APK</b> &gt; <b>Create Templates</b> to create the Android package template files such as <code>AndroidManifest.xml</code> which is the main file of concern here.</li>
<li>Check for the following settings in <code>AndroidManifest.xml</code>:<ul>
<li>Set <b>Minimum required SDK</b> to API 23 or later.</li>
<li>Set <b>Application name</b> and <b>Application icon</b>.</li>
<li>Check the <b>Permissions</b> list has all the required permissions.</li>
<li>Check the <b>Features</b> list has the software or hardware features that your application depends on, such as GPS or NFC.</li>
</ul>
<p>For more information, see <a href="http://doc.qt.io/qtcreator/creator-deploying-android.html#editing-manifest-files">editing the Manifest Files in Qt Creator</a>.</p>
<div class="admonition note">
<p><b>Note: </b>By default, Qt adds the permissions and the features based on the module dependencies of your application. If you do not want these default permissions and features, either deselect the checkboxes <b>Include default permissions for Qt modules</b> and <b>Include default features for Qt modules</b>, or remove the following part from the <code>AndroidManifest.xml</code> file:</p>
</div>
<pre class="cpp plain">
 &lt;!-- The following comment will be replaced upon deployment with default permissions based on the dependencies of the application.
      Remove the comment if you do not require these default permissions. --&gt;
 &lt;!-- %%INSERT_PERMISSIONS --&gt;

 &lt;!-- The following comment will be replaced upon deployment with default features based on the dependencies of the application.
      Remove the comment if you do not require these default features. --&gt;
 &lt;!-- %%INSERT_FEATURES --&gt;
</pre>
<p>For information on the manifest XML format, see <a href="http://developer.android.com/guide/topics/manifest/manifest-intro.html">Android: App Manifest</a>.</p>
</li>
<li>Set up a <a href="https://developer.android.com/training/articles/keystore">keystore</a> to sign your <code>.apk</code> file. You can create a new keystore if you do not have one. For more information, see <a href="http://doc.qt.io/qtcreator/creator-deploying-android.html#specifying-settings-for-packages">Specifying Settings for Packages in Qt Creator</a>.</li>
<li>Locate the generated package:<ul>
<li>For APK packages, locate the <code>.apk</code> package at:<pre class="cpp plain">
 &lt;$BUILD_DIR&gt;/android-build/build/outputs/apk/release/android-build-release.apk
</pre>
<div class="admonition note">
<p><b>Note: </b>In Qt Creator, select <b>Projects</b> &gt; <b>Build</b> &gt; <b>Build Steps</b> &gt; <b>Build Android APK</b> &gt; <b>Open package location after build</b> to build the application's <code>.apk</code> and open the directory containing the package.</p>
</div>
</li>
<li>For AAB packages, select <b>Projects</b> &gt; <b>Build</b> &gt; <b>Build Steps</b> &gt; <b>Build Android APK</b> &gt; <b>Build .aab (Android App Bundle)</b> for Qt Creator to generate the <code>.aab</code> file, then locate the package at:<pre class="cpp plain">
 &lt;$BUILD_DIR&gt;/android-build/build/outputs/bundle/release/android-build-release.aab
</pre>
</li>
</ul>
</li>
</ol>
<h2 id="uploading-the-app-to-google-play-store">Uploading the App to Google Play Store</h2>
<p>Log into the <a href="https://play.google.com/apps/publish">Google Play Developer Console</a> and upload the <code>.aab</code> files, along with a description and screen captures resembling the usage of your application.</p>
<p>For Qt versions that supports building a multi-abi bundle (i.e&#x2e; Qt 5.14 and 5.15), uploading one <code>.aab</code> with all the supported architectures is enough. However, for Qt versions that don't have the multi-abi build support, publishing your app requires additional steps.</p>
<h3 id="publishing-single-abi-bundles">Publishing Single-ABI bundles</h3>
<p>To publish your app that is built using a single ABI kit, you need to make sure that each ABI uses a different internal version code. The version code is an intenal non-public identifier for your app's release. Build each one of the architectures you want to support and set a different version code for each ABI. This can be done as follows, for CMake:</p>
<pre class="cpp plain">
 set_property(TARGET scroll_example APPEND PROPERTY QT_ANDROID_VERSION_CODE &lt;unique_version&gt;)
</pre>
<p>Or as follows for qmake:</p>
<pre class="cpp plain">
 ANDROID_VERSION_CODE = &lt;unique_version&gt;
</pre>
<p>The app developer can use a specific scheme for the version code, for exampe, the code could have a chunks for the platform, the ABI, and the actual version. Then, a sample scheme would be <code>&lt;Platform&gt;&lt;ABI&gt;&lt;AppVersion&gt;</code>:</p>
<ul>
<li>Platform:<ul>
<li>0 for Arm</li>
<li>1 for Intel</li>
</ul>
</li>
<li>Architecture:<ul>
<li>32 for 32 bit</li>
<li>64 for 64 bit</li>
</ul>
</li>
</ul>
<p>The resulting version code for a release 1.0 for arm64-v8a ABI, would be <code>06410</code>.</p>
<p>The following screenshot shows an example for an app targeting 4 ABIs, while each package uses a unique version code, which is different from the version name that is the public version string.</p>
<p class="centerAlign"><img src="images/android-single-abis.png" alt="" /></p><p>For more information on packaging, see <a href="deployment-android.html">Deploying an Application on Android</a>.</p>
</div>
<!-- @@@android-publishing-to-googleplay.html -->
<p class="naviNextPrevious footerNavi">
<a class="prevPage" href="android-3rdparty-libs.html">Third-party Android Libraries</a>
<span class="naviSeparator">  &#9702;  </span>
<a class="nextPage" href="android-platform-notes.html">Android Platform Notes</a>
</p>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2022 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
